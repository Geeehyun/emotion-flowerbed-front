// ê°ì •ë³„ ê½ƒ ë§¤í•‘ ì •ë³´
export const EMOTION_FLOWER_MAP = {
  'JOY': { name: 'í•´ë°”ë¼ê¸°', meaning: 'ë‹¹ì‹ ì„ ë³´ë©´ í–‰ë³µí•´ìš”', nameEn: 'Sunflower', file: 'sunflower', icon: 'ğŸ˜Š' },
  'HAPPINESS': { name: 'ì½”ìŠ¤ëª¨ìŠ¤', meaning: 'í‰í™”ë¡œìš´ ì‚¬ë‘', nameEn: 'Cosmos', file: 'cosmos', icon: 'ğŸ˜„' },
  'GRATITUDE': { name: 'í•‘í¬ ì¥ë¯¸', meaning: 'ê°ì‚¬ì˜ ë§ˆìŒ', nameEn: 'Pink Rose', file: 'pink-rose', icon: 'ğŸ™' },
  'EXCITEMENT': { name: 'í”„ë¦¬ì§€ì•„', meaning: 'ìˆœìˆ˜í•œ ë§ˆìŒ', nameEn: 'Freesia', file: 'freesia', icon: 'ğŸ’“' },
  'PEACE': { name: 'ì€ë°©ìš¸ê½ƒ', meaning: 'í–‰ë³µì˜ ì¬ë¦¼', nameEn: 'Lily of the Valley', file: 'lily-valley', icon: 'ğŸ˜Œ' },
  'ACHIEVEMENT': { name: 'ë…¸ë€ íŠ¤ë¦½', meaning: 'ì„±ê³µì„ ê¸°ì›í•´ìš”', nameEn: 'Yellow Tulip', file: 'yellow-tulip', icon: 'ğŸ†' },
  'LOVE': { name: 'ë¹¨ê°„ ì¥ë¯¸', meaning: 'ì‚¬ë‘í•´ìš”', nameEn: 'Red Rose', file: 'red-rose', icon: 'â¤ï¸' },
  'HOPE': { name: 'ë°ì´ì§€', meaning: 'í¬ë§ê³¼ í‰í™”', nameEn: 'Daisy', file: 'daisy', icon: 'ğŸŒŸ' },
  'VITALITY': { name: 'ê±°ë² ë¼', meaning: 'í•­ìƒ ê¸°ìš´ì°¨ê²Œ', nameEn: 'Gerbera', file: 'gerbera', icon: 'ğŸ’ª' },
  'FUN': { name: 'ìŠ¤ìœ„íŠ¸í”¼', meaning: 'ì¦ê±°ìš´ ì¶”ì–µ', nameEn: 'Sweet Pea', file: 'sweet-pea', icon: 'ğŸ‰' },
  'SADNESS': { name: 'íŒŒë€ ìˆ˜êµ­', meaning: 'ë‹¹ì‹ ì„ ì´í•´í•´ìš”', nameEn: 'Blue Hydrangea', file: 'blue-hydrangea', icon: 'ğŸ˜¢' },
  'LONELINESS': { name: 'ë¬¼ë§ì´ˆ', meaning: 'ë‚˜ë¥¼ ìŠì§€ ë§ì•„ìš”', nameEn: 'Forget-me-not', file: 'forget-me-not', icon: 'ğŸ˜”' },
  'ANXIETY': { name: 'ë¼ë²¤ë”', meaning: 'ë§ˆìŒì˜ í‰ì˜¨', nameEn: 'Lavender', file: 'lavender', icon: 'ğŸ˜°' },
  'ANGER': { name: 'ë…¸ë€ ì¹´ë„¤ì´ì…˜', meaning: 'ì‹¤ë§í–ˆì–´ìš”', nameEn: 'Yellow Carnation', file: 'yellow-carnation', icon: 'ğŸ˜ ' },
  'FATIGUE': { name: 'ë¯¼íŠ¸', meaning: 'íë§ì´ í•„ìš”í•´ìš”', nameEn: 'Mint', file: 'mint', icon: 'ğŸ˜®â€ğŸ’¨' },
  'REGRET': { name: 'ë³´ë¼ìƒ‰ íŒ¬ì§€', meaning: 'ìƒê°ì— ì ê¸°ë‹¤', nameEn: 'Purple Pansy', file: 'purple-pansy', icon: 'ğŸ˜' },
  'LETHARGY': { name: 'ë°±í•©', meaning: 'ìˆœìˆ˜í•œ ë§ˆìŒìœ¼ë¡œ', nameEn: 'Lily', file: 'lily', icon: 'ğŸ˜ª' },
  'CONFUSION': { name: 'ì•„ë„¤ëª¨ë„¤', meaning: 'ê¸°ëŒ€ì™€ í¬ë§', nameEn: 'Anemone', file: 'anemone', icon: 'ğŸ˜µ' },
  'DISAPPOINTMENT': { name: 'ë…¸ë€ ìˆ˜ì„ í™”', meaning: 'ìƒˆë¡œìš´ ì‹œì‘', nameEn: 'Yellow Daffodil', file: 'yellow-daffodil', icon: 'ğŸ˜¥' },
  'BOREDOM': { name: 'í° ì¹´ëª¨ë§ˆì¼', meaning: 'ì—­ê²½ ì†ì˜ í˜', nameEn: 'White Chamomile', file: 'white-chamomile', icon: 'ğŸ˜‘' }
};

// ê°ì •ëª… í•œê¸€ ë§¤í•‘
export const EMOTION_KR_MAP = {
  'JOY': 'ê¸°ì¨',
  'HAPPINESS': 'í–‰ë³µ',
  'GRATITUDE': 'ê°ì‚¬',
  'EXCITEMENT': 'ì„¤ë ˜',
  'PEACE': 'í‰ì˜¨',
  'ACHIEVEMENT': 'ì„±ì·¨ê°',
  'LOVE': 'ì‚¬ë‘',
  'HOPE': 'í¬ë§',
  'VITALITY': 'í™œë ¥',
  'FUN': 'ì¬ë¯¸',
  'SADNESS': 'ìŠ¬í””',
  'LONELINESS': 'ì™¸ë¡œì›€',
  'ANXIETY': 'ë¶ˆì•ˆ',
  'ANGER': 'ë¶„ë…¸',
  'FATIGUE': 'í”¼ê³¤',
  'REGRET': 'í›„íšŒ',
  'LETHARGY': 'ë¬´ê¸°ë ¥',
  'CONFUSION': 'í˜¼ë€',
  'DISAPPOINTMENT': 'ì‹¤ë§',
  'BOREDOM': 'ì§€ë£¨í•¨'
};

// ê¸°ë³¸ ê°ì • (AI ë¶„ì„ ì‹¤íŒ¨ ì‹œ)
export const DEFAULT_EMOTION = {
  coreEmotion: 'PEACE',
  flower: 'ì€ë°©ìš¸ê½ƒ',
  floriography: 'í–‰ë³µì˜ ì¬ë¦¼',
  summary: 'ì¼ê¸° ë¶„ì„ì— ì‹¤íŒ¨í–ˆì§€ë§Œ ê´œì°®ì•„ìš”.'
};

/**
 * ê°ì • ì½”ë“œë¡œ ê½ƒ ì´ë¯¸ì§€ ê²½ë¡œ ê°€ì ¸ì˜¤ê¸°
 * @param {string} emotionCode - ê°ì • ì½”ë“œ (ì˜ˆ: 'JOY')
 * @param {string} style - ì´ë¯¸ì§€ ìŠ¤íƒ€ì¼ ('3d' ë˜ëŠ” 'realistic')
 * @returns {string|null} - ì´ë¯¸ì§€ ê²½ë¡œ ë˜ëŠ” null
 */
export function getFlowerImage(emotionCode, style = '3d') {
  const flower = EMOTION_FLOWER_MAP[emotionCode];
  if (!flower) {
    // unknown ì´ë¯¸ì§€ ë°˜í™˜
    const ext = style === '3d' ? 'png' : 'jpg';
    return new URL(`../assets/images/flowers/${style}/unknown.${ext}`, import.meta.url).href;
  }

  const ext = style === '3d' ? 'png' : 'jpg';
  return new URL(`../assets/images/flowers/${style}/${flower.file}.${ext}`, import.meta.url).href;
}

/**
 * ê°ì • ì½”ë“œë¡œ í•œê¸€ ê°ì •ëª… ê°€ì ¸ì˜¤ê¸°
 * @param {string} emotionCode - ê°ì • ì½”ë“œ (ì˜ˆ: 'JOY')
 * @param {string} lang - ì–¸ì–´ ('kr' ë˜ëŠ” 'en')
 * @returns {string} - ê°ì •ëª…
 */
export function getEmotionName(emotionCode, lang = 'kr') {
  if (lang === 'kr') {
    return EMOTION_KR_MAP[emotionCode] || 'ì•Œ ìˆ˜ ì—†ìŒ';
  }
  return emotionCode;
}

/**
 * ê°ì • ì½”ë“œë¡œ ê½ƒ ì •ë³´ ì „ì²´ ê°€ì ¸ì˜¤ê¸°
 * @param {string} emotionCode - ê°ì • ì½”ë“œ (ì˜ˆ: 'JOY')
 * @returns {object} - ê½ƒ ì •ë³´ ê°ì²´
 */
export function getFlowerInfo(emotionCode) {
  return EMOTION_FLOWER_MAP[emotionCode] || {
    name: 'ì•Œ ìˆ˜ ì—†ìŒ',
    meaning: 'ê°ì •ì„ ë¶„ì„í•  ìˆ˜ ì—†ì–´ìš”',
    nameEn: 'Unknown',
    file: 'unknown',
    icon: 'â“'
  };
}
